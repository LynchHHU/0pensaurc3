-- // Loader \\ --
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- // Window \\ --
local Window = Fluent:CreateWindow({
    Title = "DF Dupe",
    SubTitle = "by LynchYT",
    TabWidth = 160,
    Size = UDim2.fromOffset(450, 300),
    Acrylic = false,
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.RightControl
})

-- // Tabs \\ --
local Tabs = {
    Information = Window:AddTab({ Title = "| Credits", Icon = "user" }),
    DupePotion = Window:AddTab({ Title = "| Dupe Potion", Icon = "crown" }),
    DupeTrinket = Window:AddTab({ Title = "| Dupe Trinket", Icon = "crown" }),
    DupeItems = Window:AddTab({ Title = "| Dupe Items", Icon = "crown" }),
    DupeFoods = Window:AddTab({ Title = "| Dupe Foods", Icon = "crown" }),
}

-------Info

local player = game.Players.LocalPlayer
local gameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
local executorName = syn and "Synapse" or getexecutorname()

Tabs.Information:AddParagraph({
    Title = "USERNAME : " .. player.Name,
    Content = ""
})

Tabs.Information:AddParagraph({
    Title = "GAME : " .. gameName,
    Content = ""
})

Tabs.Information:AddParagraph({
    Title = "EXECUTOR : " .. executorName,
    Content = ""
})

Tabs.Information:AddButton({
    Title = "DISCORD SERVER",
    Callback = function()
        local executed = false

        if not executed then
            setclipboard("https://discord.com/invite/PEV2FRsrGh")
            Fluent:Notify({
                Title = "Notification",
                Content = "Copy Successful",
                SubContent = "",
                Duration = 5
            })
            executed = true
        end
    end
})

Tabs.Information:AddButton({
    Title = "YOUTUBE CHANNEL",
    Callback = function()
        local executed = false

        if not executed then
            setclipboard("https://youtube.com/@lynchgamingyt?si=JpRBdRulxZxABnaX")
            Fluent:Notify({
                Title = "Notification",
                Content = "Copy Successful",
                SubContent = "",
                Duration = 5
            })
            executed = true
        end
    end
})

-- // Function to duplicate items \\ --
local function DupeItems(itemNames)
    for _, itemName in ipairs(itemNames) do
        local args = {
            [1] = "HUD",
            [2] = "Inventory",
            [3] = "Drop",
            [4] = itemName,
            [5] = -99999
        }
        
        game:GetService("ReplicatedStorage").Remotes.Sync:InvokeServer(unpack(args))
        
        Fluent:Notify({
            Title = "Notification",
            Content = "Dupe Successful! Check Your Inventory for " .. itemName,
            Duration = 3
        })
    end
end

-- // Utility function to add dropdown and button for duplication \\ --
local function AddDupeSection(tab, title, values)
    local selectedItem -- Declare selected item

    local Dropdown = tab:AddDropdown(title, {
        Title = title,
        Values = values,
        Multi = false,
        Default = 1,
    })

    Dropdown:OnChanged(function(value)
        selectedItem = value
    end)

    tab:AddButton({
        Title = "Dupe Selected Item",
        Callback = function()
            if selectedItem then -- Check if an item has been selected
                DupeItems({selectedItem}) -- Call DupeItems with the selected item
            else
                Fluent:Notify({
                    Title = "Error!",
                    Content = "No item selected. Please select an item from the dropdown.",
                    Duration = 3
                })
            end
        end
    })

    -- Adding instruction paragraphs to each tab
    tab:AddParagraph({
        Title = "Step 1",
        Content = "Make sure you have the item that you want to dupe"
    })

    tab:AddParagraph({
        Title = "Step 2",
        Content = "Find the item you want to dupe in the dropdown and then click the button"
    })
end

-- // Adding Duplication Sections \\ --
AddDupeSection(Tabs.DupePotion, "POTIONS", {"Wipe Potion", "Combat Potion", "Breath Indict", "Muzan Blood"})
AddDupeSection(Tabs.DupeTrinket, "TRINKETS", {"Perfect Crystal", "Green Jewel", "Red Jewel", "Gold Crown", 
                                                 "Ancient Coin", "Golden Ring", "Gold Jar", "Gold Goblet"})
AddDupeSection(Tabs.DupeItems, "ITEMS", {"Iron Ore", "Sun Ore", "Demon Horn", 
                                          "Broken Nichirin", "Blue Horn","Green Horn","Demon Collar",
                                          "Crystal Key","Weapon Parts", "Crystal Essence",})
AddDupeSection(Tabs.DupeFoods, "FOODS", {"Premium Meat", "Meat", "Soup", "Bread"})


-- // Close GUI Button \\ --
local ScreenGui= Instance.new("ScreenGui")
local ImageButton= Instance.new("ImageButton")
local UICorner= Instance.new("UICorner")

ScreenGui.Name= ""
ScreenGui.Parent= game.CoreGui or game.Players.LocalPlayer.PlayerGui
ScreenGui.ZIndexBehavior= Enum.ZIndexBehavior.Sibling

ImageButton.Parent= ScreenGui
ImageButton.BackgroundColor3= Color3.fromRGB(0, 0, 0)
ImageButton.BackgroundTransparency= 1
ImageButton.BorderSizePixel= 0
ImageButton.Position= UDim2.new(0.120833337, 0, 0.0952890813, 0)
ImageButton.Size= UDim2.new(0, 50, 0, 50)
ImageButton.Image= "https://www.roblox.com/asset/?id=18687520299"

UICorner.Parent= ImageButton

ImageButton.MouseButton1Down:Connect(function()
    game:GetService("VirtualInputManager"):SendKeyEvent(true,305,false,game)
    game:GetService("VirtualInputManager"):SendKeyEvent(false,305,false,game)
end)
